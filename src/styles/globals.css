@tailwind base;
@tailwind components;
@tailwind utilities;

/* Reset and base styles */
* {
  box-sizing: border-box;
}

html {
  color-scheme: light dark;
  transition: color-scheme 0.1s ease;
}

html, body, #root {
  height: 100%;
  margin: 0;
  padding: 0;
  background-color: #ffffff;
  transition: background-color 0.1s ease;
}

/* Allow scrolling on mobile for landing page */
body {
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* PWA-specific styles when in standalone mode */
@media (display-mode: standalone) {
  html, body {
    /* Prevent pull-to-refresh */
    overscroll-behavior-y: contain;
    /* Prevent bounce effect */
    overscroll-behavior: none;
    /* Fixed positioning for app-like feel */
    position: fixed;
    width: 100%;
    overflow: hidden;
  }
  
  /* Prevent text selection in PWA mode */
  * {
    -webkit-user-select: none;
    user-select: none;
    /* Prevent touch callout on iOS */
    -webkit-touch-callout: none;
  }
  
  /* Re-enable text selection for input fields */
  input, textarea, select, [contenteditable="true"] {
    -webkit-user-select: auto;
    user-select: auto;
  }
}

/* Only hide overflow for the app routes */
body.app-route {
  overflow: hidden;
}

/* Dark mode styles */
html.dark {
  color-scheme: dark;
}

html.dark, html.dark body, html.dark #root {
  background-color: #1f2937;
}

/* Mapbox CSS override to prevent conflicts */
.mapboxgl-map {
  font-family: inherit;
}

.mapboxgl-ctrl-attrib {
  font-size: 11px;
}

/* Dark mode support */
.dark {
  color-scheme: dark;
}

/* Prevent flash on hover in dark mode */
.dark button {
  will-change: background-color;
  contain: layout style;
}

/* Improve transitions for better performance */
.transition-colors {
  will-change: background-color, color;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Smooth backdrop transitions */
.backdrop-blur {
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

/* Custom purple hover colors matching TopNav */
.hover-purple-light:hover {
  background-color: #f3f1f7;
}

.hover-purple-medium:hover {
  background-color: #e9e5f2;
}

/* Custom purple hover with transparency for both modes */
.hover-purple-transparent:hover {
  background-color: rgba(108, 61, 145, 0.2) !important;
}

.hover-purple-close:hover {
  background-color: rgba(108, 61, 145, 0.25) !important;
}

/* Prevent screen flashing in dark mode */
.hover-purple-transparent {
  isolation: isolate;
  contain: layout style paint;
}

.hover-purple-close {
  isolation: isolate;
  contain: layout style paint;
}

/* Emergency contact hover isolation */
.hover-red-emergency {
  isolation: isolate;
  contain: layout style paint;
}

/* Force hardware acceleration for smooth transitions */
.transition-colors {
  transform: translateZ(0);
  backface-visibility: hidden;
}
